<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>sciClaw Documentation</title>
  <meta name="description" content="sciClaw documentation — an autonomous paired-scientist CLI for reproducible research workflows." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
  <style>
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}

    :root {
      --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
      --font-mono: 'JetBrains Mono', 'SF Mono', 'Fira Code', 'Fira Mono', Menlo, Consolas, monospace;
      --color-bg: #ffffff;
      --color-bg-soft: #f6f8fa;
      --color-bg-sidebar: #f9fafb;
      --color-text: #1a1a2e;
      --color-text-secondary: #57606a;
      --color-text-tertiary: #8b949e;
      --color-border: #d1d9e0;
      --color-border-light: #e8ecf0;
      --color-link: #0969da;
      --color-link-hover: #0550ae;
      --color-accent: #0f766e;
      --color-accent-bg: #f0fdfa;
      --color-code-bg: #24292f;
      --color-code-text: #e6edf3;
      --color-sidebar-active: #0969da;
      --color-sidebar-active-bg: #ddf4ff;
      --header-height: 60px;
      --sidebar-width: 280px;
      --content-max: 820px;
    }

    [data-theme="dark"] {
      --color-bg: #0d1117;
      --color-bg-soft: #161b22;
      --color-bg-sidebar: #0d1117;
      --color-text: #e6edf3;
      --color-text-secondary: #8b949e;
      --color-text-tertiary: #6e7681;
      --color-border: #30363d;
      --color-border-light: #21262d;
      --color-link: #58a6ff;
      --color-link-hover: #79c0ff;
      --color-accent: #3fb9a8;
      --color-accent-bg: #0f2b26;
      --color-code-bg: #161b22;
      --color-code-text: #e6edf3;
      --color-sidebar-active: #58a6ff;
      --color-sidebar-active-bg: #1c2536;
    }

    html {
      font-size: 16px;
      scroll-behavior: smooth;
      scroll-padding-top: calc(var(--header-height) + 24px);
    }

    body {
      font-family: var(--font-sans);
      color: var(--color-text);
      background: var(--color-bg);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      transition: background-color 0.2s, color 0.2s;
    }

    html.no-transition, html.no-transition * {
      transition: none !important;
    }

    /* ── Header ── */
    .header {
      position: sticky;
      top: 0;
      z-index: 100;
      height: var(--header-height);
      background: var(--color-bg);
      border-bottom: 1px solid var(--color-border);
      display: flex;
      align-items: center;
      padding: 0 24px;
    }

    .header-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      max-width: 1400px;
      margin: 0 auto;
    }

    .header-brand {
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
      color: var(--color-text);
      font-weight: 700;
      font-size: 18px;
      letter-spacing: -0.01em;
    }

    .header-brand-icon {
      font-size: 22px;
      line-height: 1;
    }

    .header-nav {
      display: flex;
      align-items: center;
      gap: 24px;
    }

    .header-nav a {
      text-decoration: none;
      color: var(--color-text-secondary);
      font-size: 14px;
      font-weight: 500;
      transition: color 0.15s;
    }

    .header-nav a:hover {
      color: var(--color-text);
    }

    .header-nav a.active {
      color: var(--color-text);
    }

    .menu-toggle {
      display: none;
      background: none;
      border: 1px solid var(--color-border);
      border-radius: 6px;
      padding: 6px 10px;
      cursor: pointer;
      color: var(--color-text);
      font-size: 18px;
    }

    /* ── Layout ── */
    .layout {
      display: flex;
      min-height: calc(100vh - var(--header-height));
    }

    /* ── Sidebar ── */
    .sidebar {
      position: sticky;
      top: var(--header-height);
      width: var(--sidebar-width);
      min-width: var(--sidebar-width);
      height: calc(100vh - var(--header-height));
      overflow-y: auto;
      border-right: 1px solid var(--color-border);
      background: var(--color-bg-sidebar);
      padding: 20px 0;
      font-size: 14px;
    }

    .sidebar::-webkit-scrollbar { width: 4px; }
    .sidebar::-webkit-scrollbar-thumb { background: var(--color-border); border-radius: 4px; }

    .sidebar-section {
      margin-bottom: 8px;
    }

    .sidebar-heading {
      padding: 6px 20px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--color-text-tertiary);
    }

    .sidebar-link {
      display: block;
      padding: 5px 20px 5px 28px;
      color: var(--color-text-secondary);
      text-decoration: none;
      font-weight: 400;
      border-left: 2px solid transparent;
      transition: all 0.12s;
    }

    .sidebar-link:hover {
      color: var(--color-text);
      background: var(--color-border-light);
    }

    .sidebar-link.active {
      color: var(--color-sidebar-active);
      font-weight: 500;
      background: var(--color-sidebar-active-bg);
      border-left-color: var(--color-sidebar-active);
    }

    .sidebar-link.nested {
      padding-left: 40px;
      font-size: 13px;
    }

    /* ── Content ── */
    .content {
      flex: 1;
      min-width: 0;
      padding: 40px 48px 80px;
    }

    .content-inner {
      max-width: var(--content-max);
    }

    /* ── Typography ── */
    h1 { font-size: 32px; font-weight: 700; letter-spacing: -0.02em; margin-bottom: 8px; line-height: 1.2; }
    h2 { font-size: 24px; font-weight: 600; letter-spacing: -0.01em; margin: 48px 0 16px; padding-bottom: 8px; border-bottom: 1px solid var(--color-border-light); line-height: 1.3; }
    h3 { font-size: 18px; font-weight: 600; margin: 32px 0 12px; line-height: 1.4; }
    h4 { font-size: 15px; font-weight: 600; margin: 24px 0 8px; }

    .page-subtitle {
      color: var(--color-text-secondary);
      font-size: 17px;
      margin-bottom: 32px;
      line-height: 1.6;
    }

    p { margin: 0 0 16px; }

    a { color: var(--color-link); text-decoration: none; }
    a:hover { color: var(--color-link-hover); text-decoration: underline; }

    strong { font-weight: 600; }

    ul, ol { margin: 0 0 16px; padding-left: 24px; }
    li { margin-bottom: 4px; }
    li > ul, li > ol { margin-top: 4px; margin-bottom: 4px; }

    /* ── Code ── */
    code {
      font-family: var(--font-mono);
      font-size: 0.875em;
      background: var(--color-bg-soft);
      padding: 2px 6px;
      border-radius: 4px;
      border: 1px solid var(--color-border-light);
    }

    pre {
      background: var(--color-code-bg);
      color: var(--color-code-text);
      border-radius: 8px;
      padding: 16px 20px;
      overflow-x: auto;
      margin: 0 0 20px;
      line-height: 1.5;
      font-size: 13.5px;
    }

    pre code {
      background: none;
      border: none;
      padding: 0;
      font-size: inherit;
      color: inherit;
    }

    /* syntax highlighting (minimal) */
    .hl-comment { color: #8b949e; }
    .hl-string { color: #a5d6ff; }
    .hl-key { color: #7ee787; }
    .hl-value { color: #a5d6ff; }
    .hl-flag { color: #d2a8ff; }
    .hl-cmd { color: #79c0ff; }

    /* ── Tables ── */
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 0 0 20px;
      font-size: 14px;
    }

    th, td {
      text-align: left;
      padding: 10px 12px;
      border: 1px solid var(--color-border-light);
    }

    th {
      background: var(--color-bg-soft);
      font-weight: 600;
      font-size: 13px;
    }

    /* ── Callouts ── */
    .callout {
      border-left: 3px solid var(--color-accent);
      background: var(--color-accent-bg);
      padding: 14px 16px;
      margin: 0 0 20px;
      border-radius: 0 6px 6px 0;
      font-size: 14px;
    }

    .callout p:last-child { margin-bottom: 0; }

    .callout-title {
      font-weight: 600;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.03em;
      color: var(--color-accent);
      margin-bottom: 4px;
    }

    .callout-warn {
      border-left-color: #bf8700;
      background: #fffbe6;
    }

    .callout-warn .callout-title { color: #9a6700; }

    [data-theme="dark"] .callout-warn {
      border-left-color: #d29922;
      background: #2a2216;
    }

    [data-theme="dark"] .callout-warn .callout-title { color: #d29922; }

    /* ── Section dividers ── */
    .section { scroll-margin-top: calc(var(--header-height) + 20px); }

    hr {
      border: none;
      border-top: 1px solid var(--color-border-light);
      margin: 48px 0;
    }

    /* ── Prev / Next ── */
    .page-nav {
      display: flex;
      justify-content: space-between;
      margin-top: 64px;
      padding-top: 24px;
      border-top: 1px solid var(--color-border-light);
      font-size: 14px;
    }

    .page-nav a {
      display: flex;
      flex-direction: column;
      gap: 2px;
      text-decoration: none;
    }

    .page-nav a:hover { text-decoration: none; }
    .page-nav a:hover .page-nav-title { text-decoration: underline; }

    .page-nav-label {
      font-size: 12px;
      color: var(--color-text-tertiary);
      font-weight: 500;
    }

    .page-nav-title {
      color: var(--color-link);
      font-weight: 500;
    }

    .page-nav-next { text-align: right; margin-left: auto; }

    /* ── Footer ── */
    .footer {
      padding: 24px 48px;
      border-top: 1px solid var(--color-border-light);
      color: var(--color-text-tertiary);
      font-size: 13px;
      text-align: center;
    }

    /* ── Responsive ── */
    @media (max-width: 900px) {
      .sidebar {
        position: fixed;
        left: -300px;
        top: var(--header-height);
        z-index: 50;
        transition: left 0.25s ease;
        box-shadow: none;
      }

      .sidebar.open {
        left: 0;
        box-shadow: 4px 0 24px rgba(0,0,0,0.08);
      }

      .menu-toggle { display: block; }

      .content { padding: 24px 20px 60px; }
      .footer { padding: 20px; }

      .header-nav { gap: 16px; }
    }

    @media (max-width: 540px) {
      h1 { font-size: 26px; }
      h2 { font-size: 20px; }
      .header-nav a.hide-mobile { display: none; }
    }

    /* backdrop for mobile sidebar */
    .sidebar-backdrop {
      display: none;
      position: fixed;
      inset: 0;
      top: var(--header-height);
      z-index: 49;
      background: rgba(0,0,0,0.3);
    }

    .sidebar-backdrop.open { display: block; }

    /* ── Theme toggle ── */
    .theme-toggle {
      background: none;
      border: 1px solid var(--color-border);
      border-radius: 6px;
      padding: 4px 8px;
      cursor: pointer;
      color: var(--color-text-secondary);
      font-size: 16px;
      line-height: 1;
      transition: color 0.15s, border-color 0.15s;
    }

    .theme-toggle:hover {
      color: var(--color-text);
      border-color: var(--color-text-tertiary);
    }
  </style>
  <script>
    // Apply theme before first paint to prevent flash
    (function() {
      var saved = localStorage.getItem('sciclaw-theme');
      var theme = saved || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
      if (theme === 'dark') {
        document.documentElement.setAttribute('data-theme', 'dark');
      }
      document.documentElement.classList.add('no-transition');
    })();
  </script>
</head>
<body>

<!-- ═══════════ HEADER ═══════════ -->
<header class="header">
  <div class="header-inner">
    <div style="display:flex;align-items:center;gap:16px">
      <button class="menu-toggle" onclick="toggleSidebar()" aria-label="Menu">&#9776;</button>
      <a href="#" class="header-brand">
        <span class="header-brand-icon">&#x1F52C;</span> sciClaw
      </a>
    </div>
    <nav class="header-nav">
      <a href="#" class="active">Documentation</a>
      <a href="https://github.com/drpedapati/sciclaw" target="_blank" rel="noopener">Source code</a>
      <a href="https://github.com/drpedapati/sciclaw/issues" target="_blank" rel="noopener" class="hide-mobile">Help</a>
      <button class="theme-toggle" id="themeToggle" onclick="toggleTheme()" aria-label="Toggle dark mode" title="Toggle dark mode">&#9790;</button>
    </nav>
  </div>
</header>

<!-- ═══════════ LAYOUT ═══════════ -->
<div class="layout">

  <!-- backdrop -->
  <div class="sidebar-backdrop" id="sidebarBackdrop" onclick="toggleSidebar()"></div>

  <!-- ─── Sidebar ─── -->
  <nav class="sidebar" id="sidebar">
    <div class="sidebar-section">
      <div class="sidebar-heading">Getting Started</div>
      <a class="sidebar-link active" href="#installation">Installation</a>
      <a class="sidebar-link" href="#updating">Updating</a>
      <a class="sidebar-link" href="#quick-start">Quick Start</a>
      <a class="sidebar-link" href="#scientist-setup">Scientist Setup</a>
    </div>
    <div class="sidebar-section">
      <div class="sidebar-heading">Configuration</div>
      <a class="sidebar-link" href="#configuration">Overview</a>
      <a class="sidebar-link nested" href="#providers">Providers</a>
      <a class="sidebar-link nested" href="#authentication">Authentication</a>
      <a class="sidebar-link nested" href="#workspace">Workspace Layout</a>
    </div>
    <div class="sidebar-section">
      <div class="sidebar-heading">Commands</div>
      <a class="sidebar-link" href="#cli-reference">CLI Reference</a>
      <a class="sidebar-link nested" href="#agent">Agent</a>
      <a class="sidebar-link nested" href="#model-switching">Model Switching</a>
      <a class="sidebar-link nested" href="#gateway">Gateway</a>
      <a class="sidebar-link nested" href="#service">Service</a>
      <a class="sidebar-link nested" href="#skills-cmd">Skills</a>
      <a class="sidebar-link nested" href="#doctor">Doctor</a>
    </div>
    <div class="sidebar-section">
      <div class="sidebar-heading">Scientific Workflow</div>
      <a class="sidebar-link" href="#paired-scientist">Paired-Scientist Model</a>
      <a class="sidebar-link nested" href="#research-loop">Research Loop</a>
      <a class="sidebar-link nested" href="#skills">Skills</a>
      <a class="sidebar-link" href="#irl">IRL Integration</a>
      <a class="sidebar-link nested" href="#irl-why">Why IRL</a>
      <a class="sidebar-link nested" href="#irl-how">How It Works</a>
      <a class="sidebar-link nested" href="#irl-provenance">Provenance</a>
    </div>
    <div class="sidebar-section">
      <div class="sidebar-heading">Chat Channels</div>
      <a class="sidebar-link" href="#channels">Overview</a>
      <a class="sidebar-link nested" href="#telegram">Telegram</a>
      <a class="sidebar-link nested" href="#discord">Discord</a>
    </div>
    <div class="sidebar-section">
      <div class="sidebar-heading">Advanced</div>
      <a class="sidebar-link" href="#hooks">Hooks</a>
      <a class="sidebar-link nested" href="#hook-events">Events</a>
      <a class="sidebar-link nested" href="#hook-policy">Policy</a>
      <a class="sidebar-link nested" href="#hook-audit">Audit Log</a>
      <a class="sidebar-link" href="#heartbeat">Heartbeat</a>
      <a class="sidebar-link nested" href="#cron">Scheduled Tasks</a>
      <a class="sidebar-link nested" href="#docker">Docker</a>
    </div>
  </nav>

  <!-- ─── Content ─── -->
  <main class="content">
    <div class="content-inner">

      <!-- ━━━━━ INSTALLATION ━━━━━ -->
      <div class="section" id="installation">
        <h1>Installation</h1>
        <p class="page-subtitle">Get sciClaw running in minutes. Choose the method that fits your workflow.</p>

        <h3>Prerequisites: install Homebrew</h3>
        <p>If you don't already have <a href="https://brew.sh" target="_blank" rel="noopener">Homebrew</a>, install it first. Open <strong>Terminal</strong> (macOS) or your shell (Linux) and paste:</p>
        <pre><code><span class="hl-cmd">/bin/bash</span> -c <span class="hl-string">"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"</span></code></pre>
        <p>Follow the on-screen prompts. When it finishes, confirm Homebrew is available:</p>
        <pre><code><span class="hl-cmd">brew</span> <span class="hl-flag">--version</span></code></pre>

        <h3>Step 1 &mdash; Install sciClaw</h3>
        <p>Add the sciClaw tap and install the package:</p>
        <pre><code><span class="hl-cmd">brew</span> tap drpedapati/tap &amp;&amp; <span class="hl-cmd">brew</span> install sciclaw</code></pre>
        <p>This installs <code>sciclaw</code> as the primary command and <code>picoclaw</code> as a compatibility alias. Homebrew also installs companion tools used by built-in skills (including <code>irl</code>, <code>rg</code>, <code>docx-review</code>, and <code>pubmed-cli</code>) as dependencies.</p>

        <h3>Step 2 &mdash; Onboard</h3>
        <pre><code><span class="hl-cmd">sciclaw</span> onboard <span class="hl-flag">--yes</span></code></pre>
        <p><code>onboard</code> creates the default configuration directory (<code>~/.config/sciclaw/</code>), writes starter config files, and registers the built-in skill pack. The <code>--yes</code> flag accepts defaults so it runs non-interactively. You can re-run <code>sciclaw onboard</code> at any time without losing existing settings.</p>

        <h3>Step 3 &mdash; Doctor</h3>
        <pre><code><span class="hl-cmd">sciclaw</span> doctor</code></pre>
        <p><code>doctor</code> checks that everything is wired up correctly: it verifies the config directory exists, all companion tools are reachable on your <code>PATH</code>, skill definitions are valid, and your shell environment is ready. If anything is missing or misconfigured it prints a clear explanation and suggested fix.</p>

        <p>Finally, confirm the installed version:</p>
        <pre><code><span class="hl-cmd">sciclaw</span> <span class="hl-flag">--version</span></code></pre>
        <p>On Linux, the tap also installs Quarto for reproducible manuscript rendering. On macOS, install Quarto via <code>brew install --cask quarto</code>. Stable releases auto-update via the GitHub release workflow.</p>

        <h3>Download a binary</h3>
        <p>Pre-compiled binaries for Linux (amd64, arm64, riscv64), macOS (arm64), and Windows (amd64) are available on the <a href="https://github.com/drpedapati/sciclaw/releases">releases page</a>.</p>

        <h3>Install from source</h3>
        <pre><code><span class="hl-cmd">git</span> clone https://github.com/drpedapati/sciclaw.git
<span class="hl-cmd">cd</span> sciclaw
<span class="hl-cmd">make</span> deps

<span class="hl-comment"># Build for your platform</span>
<span class="hl-cmd">make</span> build

<span class="hl-comment"># Or build and install to ~/.local/bin</span>
<span class="hl-cmd">make</span> install</code></pre>

        <div class="callout">
          <div class="callout-title">Note</div>
          <p>sciClaw is a Go binary. Building from source requires Go 1.25+ and <code>make</code>.</p>
        </div>
      </div>

      <hr />

      <!-- ━━━━━ UPDATING ━━━━━ -->
      <div class="section" id="updating">
        <h2>Updating</h2>
        <p class="page-subtitle">Keep sciClaw and its components current.</p>

        <p>sciClaw is distributed as a single binary with two bundled sub-components: the <strong>IRL runtime</strong> (Idempotent Research Loop) and <strong>baseline scientific skills</strong>. How you update depends on how you installed.</p>

        <h3>Homebrew (recommended)</h3>
        <p>If you installed via Homebrew, a single command updates sciClaw <em>and</em> all its dependencies, including the IRL runtime:</p>
        <pre><code><span class="hl-cmd">brew</span> upgrade sciclaw</code></pre>
        <p>This pulls the latest formula from the <code>drpedapati/tap</code> tap, rebuilds the binary, and upgrades the <code>irl</code> dependency if a newer version is available.</p>
        <p>Note: on macOS, Quarto is typically installed via a Homebrew cask, so update it separately with <code>brew upgrade --cask quarto</code>.</p>

        <p>To check what version you're running before and after:</p>
        <pre><code><span class="hl-cmd">sciclaw</span> <span class="hl-flag">--version</span>
<span class="hl-cmd">sciclaw</span> status</code></pre>

        <h3>Binary releases</h3>
        <p>If you installed from a downloaded binary, replace it with the latest from the <a href="https://github.com/drpedapati/sciclaw/releases">releases page</a>. The IRL binary must be updated separately &mdash; download it from the <a href="https://github.com/drpedapati/irl-template/releases">IRL releases page</a> and place it on your <code>PATH</code>.</p>

        <h3>From source</h3>
        <pre><code><span class="hl-cmd">cd</span> sciclaw
<span class="hl-cmd">git</span> pull
<span class="hl-cmd">make</span> deps
<span class="hl-cmd">make</span> install</code></pre>
        <p>This rebuilds and reinstalls to <code>~/.local/bin</code>. For IRL, pull and rebuild its repo separately.</p>

        <h3>Updating skills</h3>
        <p>Baseline scientific skills are installed during <code>sciclaw onboard</code> and live in <code>~/sciclaw/skills/</code> by default. They are <strong>not</strong> automatically updated when you upgrade the binary. To refresh them to the latest built-in versions:</p>
        <pre><code><span class="hl-comment"># Re-install all built-in skills (overwrites existing)</span>
<span class="hl-cmd">sciclaw</span> skills install-builtin

<span class="hl-comment"># Or re-run onboard to refresh workspace templates + skills</span>
<span class="hl-cmd">sciclaw</span> onboard</code></pre>

        <p>Third-party skills installed from GitHub can be updated by re-installing them:</p>
        <pre><code><span class="hl-comment"># Re-install a GitHub skill to get the latest version</span>
<span class="hl-cmd">sciclaw</span> skills install <span class="hl-string">username/repo/skill-name</span></code></pre>

        <h3>Updating configuration</h3>
        <p>New sciClaw versions may add config fields (like <code>reasoning_effort</code>). Your existing <code>config.json</code> continues to work &mdash; new fields use sensible defaults when absent. To see what's available, compare with the default config:</p>
        <pre><code><span class="hl-comment"># View current config</span>
<span class="hl-cmd">sciclaw</span> status

<span class="hl-comment"># Check model and provider details</span>
<span class="hl-cmd">sciclaw</span> models status</code></pre>

        <h3>Verifying the update</h3>
        <p>After updating, verify all components are working:</p>
        <pre><code><span class="hl-comment"># Check version</span>
<span class="hl-cmd">sciclaw</span> <span class="hl-flag">--version</span>

<span class="hl-comment"># Check all components: config, workspace, providers, IRL runtime</span>
<span class="hl-cmd">sciclaw</span> status

<span class="hl-comment"># Verify skills are loaded</span>
<span class="hl-cmd">sciclaw</span> skills list

<span class="hl-comment"># Quick smoke test</span>
<span class="hl-cmd">sciclaw</span> agent <span class="hl-flag">-m</span> <span class="hl-string">"Hello, what version are you?"</span></code></pre>

        <div class="callout">
          <div class="callout-title">Component summary</div>
          <table>
            <thead>
              <tr><th>Component</th><th>Updated by</th><th>Location</th></tr>
            </thead>
            <tbody>
              <tr><td><code>sciclaw</code> binary</td><td><code>brew upgrade sciclaw</code></td><td><code>$(brew --prefix)/bin/sciclaw</code></td></tr>
              <tr><td><code>irl</code> runtime</td><td><code>brew upgrade sciclaw</code> (dependency)</td><td><code>$(brew --prefix)/bin/irl</code></td></tr>
              <tr><td><code>quarto</code> (optional)</td><td>macOS: <code>brew upgrade --cask quarto</code> / Linux: <code>brew upgrade sciclaw</code> (dependency)</td><td><code>$(brew --prefix)/bin/quarto</code></td></tr>
              <tr><td>Baseline skills</td><td><code>sciclaw skills install-builtin</code></td><td><code>~/sciclaw/skills/</code></td></tr>
              <tr><td>Config file</td><td>Manual or <code>sciclaw models set</code></td><td><code>~/.picoclaw/config.json</code></td></tr>
              <tr><td>Workspace templates</td><td><code>sciclaw onboard</code></td><td><code>~/sciclaw/</code></td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <hr />

      <!-- ━━━━━ QUICK START ━━━━━ -->
      <div class="section" id="quick-start">
        <h2>Quick Start</h2>
        <p class="page-subtitle">From zero to a working paired-scientist assistant in four steps.</p>

        <h3>1. Initialize</h3>
        <pre><code><span class="hl-cmd">sciclaw</span> onboard</code></pre>
        <p>This creates <code>~/.picoclaw/config.json</code>, scaffolds the workspace at <code>~/sciclaw/</code> by default, and installs baseline scientific skills. In interactive mode, onboard also offers a short wizard (optional OpenAI OAuth login, optional PubMed API key, optional chat smoke test). Use <code>sciclaw onboard --yes</code> to skip all prompts.</p>

        <h3>2. Configure a provider</h3>
        <p>Edit <code>~/.picoclaw/config.json</code> with your LLM provider credentials:</p>
        <pre><code>{
  <span class="hl-key">"agents"</span>: {
    <span class="hl-key">"defaults"</span>: {
      <span class="hl-key">"model"</span>: <span class="hl-string">"gpt-5.2"</span>,
      <span class="hl-key">"max_tokens"</span>: 8192,
      <span class="hl-key">"temperature"</span>: 0.7
    }
  },
  <span class="hl-key">"providers"</span>: {
    <span class="hl-key">"openrouter"</span>: {
      <span class="hl-key">"api_key"</span>: <span class="hl-string">"sk-or-v1-..."</span>
    }
  }
}</code></pre>

        <h3>3. Authenticate (alternative to API keys)</h3>
        <pre><code><span class="hl-comment"># OpenAI OAuth (device code)</span>
<span class="hl-cmd">sciclaw</span> auth login <span class="hl-flag">--provider</span> openai

<span class="hl-comment"># Anthropic token paste</span>
<span class="hl-cmd">sciclaw</span> auth login <span class="hl-flag">--provider</span> anthropic

<span class="hl-comment"># Check status</span>
<span class="hl-cmd">sciclaw</span> auth status</code></pre>

        <h3>4. Chat</h3>
        <pre><code><span class="hl-comment"># One-shot</span>
<span class="hl-cmd">sciclaw</span> agent <span class="hl-flag">-m</span> <span class="hl-string">"What pathways are implicated in ALS?"</span>

<span class="hl-comment"># Interactive mode</span>
<span class="hl-cmd">sciclaw</span> agent</code></pre>
        <p>That's it. You have a working paired-scientist assistant.</p>
      </div>

      <hr />

      <!-- ━━━━━ SCIENTIST SETUP ━━━━━ -->
      <div class="section" id="scientist-setup">
        <h2>Scientist Setup Guide</h2>
        <p class="page-subtitle">The intended workflow for non-technical scientific users: chat in Telegram/Discord, keep an auditable workspace.</p>

        <h3>What this feels like</h3>
        <p>You talk to sciClaw in your normal chat app. sciClaw proposes a plan, runs tools, and writes evidence and drafts into a visible workspace folder. You review outputs and iterate.</p>

        <h3>Recommended setup (Telegram)</h3>
        <ol>
          <li><strong>Install</strong> (Homebrew recommended)</li>
        </ol>
        <pre><code><span class="hl-cmd">brew</span> tap drpedapati/tap &amp;&amp; <span class="hl-cmd">brew</span> install sciclaw</code></pre>

        <ol start="2">
          <li><strong>Initialize</strong> (creates config + workspace + baseline skills)</li>
        </ol>
        <pre><code><span class="hl-cmd">sciclaw</span> onboard</code></pre>

        <ol start="3">
          <li><strong>Connect a provider</strong> (OAuth for ChatGPT subscribers, or API keys)</li>
        </ol>
        <pre><code><span class="hl-comment"># OpenAI OAuth (device code)</span>
<span class="hl-cmd">sciclaw</span> auth login <span class="hl-flag">--provider</span> openai

<span class="hl-comment"># Optional: PubMed rate limits (the onboard wizard can save this too)</span>
<span class="hl-cmd">export</span> NCBI_API_KEY=<span class="hl-string">"your-key"</span></code></pre>

        <ol start="4">
          <li><strong>Pair Telegram</strong> (writes an allowlist so only you can talk to the bot)</li>
        </ol>
        <pre><code><span class="hl-cmd">sciclaw</span> channels setup telegram</code></pre>

        <ol start="5">
          <li><strong>Start the gateway</strong> (background mode recommended for daily use)</li>
        </ol>
        <pre><code><span class="hl-comment"># Background mode</span>
<span class="hl-cmd">sciclaw</span> service install
<span class="hl-cmd">sciclaw</span> service start

<span class="hl-comment"># Foreground mode</span>
<span class="hl-cmd">sciclaw</span> gateway</code></pre>

        <div class="callout">
          <div class="callout-title">Where your work lives</div>
          <p><strong>Workspace (visible):</strong> <code>~/sciclaw/</code> (sessions, evidence, skills, hooks, IRL audit logs).</p>
          <p><strong>Config + auth (hidden):</strong> <code>~/.picoclaw/config.json</code> and <code>~/.picoclaw/auth.json</code> (secrets and provider credentials).</p>
        </div>

        <div class="callout callout-warn">
          <div class="callout-title">Common gotcha</div>
          <p><strong>Telegram only allows one gateway instance per bot.</strong> If you run multiple instances you will see a 409 conflict. Stop the other instance, then restart the active mode (<code>sciclaw service restart</code> or <code>sciclaw gateway</code>).</p>
        </div>

        <h3>Discord instead of Telegram</h3>
        <p>Discord setup is also first-class:</p>
        <pre><code><span class="hl-cmd">sciclaw</span> channels setup discord
<span class="hl-cmd">sciclaw</span> service install
<span class="hl-cmd">sciclaw</span> service start</code></pre>
        <p>Discord requires enabling <strong>MESSAGE CONTENT INTENT</strong> in the Developer Portal.</p>

        <h3>Keep it up to date</h3>
        <pre><code><span class="hl-cmd">brew</span> upgrade sciclaw
<span class="hl-cmd">sciclaw</span> doctor</code></pre>
        <p>If <code>doctor</code> reports missing companion tools (docx-review, pubmed-cli, IRL, ripgrep), install via Homebrew or follow the install hints in the report.</p>
      </div>

      <hr />

      <!-- ━━━━━ CONFIGURATION ━━━━━ -->
      <div class="section" id="configuration">
        <h2>Configuration</h2>
        <p class="page-subtitle">All settings live in <code>~/.picoclaw/config.json</code>.</p>

        <p>The config file controls agent defaults, provider credentials, channel integrations, tool settings, and heartbeat behavior. A complete example is shipped at <code>config/config.example.json</code> in the repository.</p>

        <pre><code>{
  <span class="hl-key">"agents"</span>: {
    <span class="hl-key">"defaults"</span>: {
      <span class="hl-key">"workspace"</span>: <span class="hl-string">"~/sciclaw"</span>,
      <span class="hl-key">"model"</span>: <span class="hl-string">"gpt-5.2"</span>,
      <span class="hl-key">"reasoning_effort"</span>: <span class="hl-string">"high"</span>,
      <span class="hl-key">"max_tokens"</span>: 8192,
      <span class="hl-key">"temperature"</span>: 0.7,
      <span class="hl-key">"max_tool_iterations"</span>: 20
    }
  },
  <span class="hl-key">"providers"</span>: { ... },
  <span class="hl-key">"channels"</span>: { ... },
  <span class="hl-key">"tools"</span>: {
    <span class="hl-key">"web"</span>: {
      <span class="hl-key">"brave"</span>: {
        <span class="hl-key">"enabled"</span>: true,
        <span class="hl-key">"api_key"</span>: <span class="hl-string">"YOUR_BRAVE_API_KEY"</span>,
        <span class="hl-key">"max_results"</span>: 5
      },
      <span class="hl-key">"duckduckgo"</span>: {
        <span class="hl-key">"enabled"</span>: true,
        <span class="hl-key">"max_results"</span>: 5
      }
    },
    <span class="hl-key">"pubmed"</span>: {
      <span class="hl-key">"api_key"</span>: <span class="hl-string">"YOUR_NCBI_API_KEY"</span>
    }
  },
  <span class="hl-key">"heartbeat"</span>: {
    <span class="hl-key">"enabled"</span>: true,
    <span class="hl-key">"interval"</span>: 30
  }
}</code></pre>
      </div>

      <!-- ─── Providers ─── -->
      <div class="section" id="providers">
        <h3>Providers</h3>
        <p>sciClaw supports multiple LLM providers. Configure one or more in the <code>providers</code> section.</p>

        <table>
          <thead>
            <tr><th>Provider</th><th>Purpose</th><th>Auth</th></tr>
          </thead>
          <tbody>
            <tr><td><code>openrouter</code></td><td>LLM &mdash; access to all models</td><td>API key</td></tr>
            <tr><td><code>anthropic</code></td><td>Claude direct</td><td>API key or <code>sciclaw auth login</code></td></tr>
            <tr><td><code>openai</code></td><td>GPT direct (primary: <code>gpt-5.2</code>)</td><td>API key or device-code OAuth</td></tr>
            <tr><td><code>gemini</code></td><td>Gemini direct</td><td>API key</td></tr>
            <tr><td><code>zhipu</code></td><td>GLM models, best for Chinese users</td><td>API key</td></tr>
            <tr><td><code>deepseek</code></td><td>DeepSeek direct</td><td>API key</td></tr>
            <tr><td><code>groq</code></td><td>Fast inference + voice transcription</td><td>API key</td></tr>
          </tbody>
        </table>

        <div class="callout">
          <div class="callout-title">Tip</div>
          <p>Groq provides free voice transcription via Whisper. When configured, Telegram voice messages are automatically transcribed.</p>
        </div>
      </div>

      <!-- ─── Authentication ─── -->
      <div class="section" id="authentication">
        <h3>Authentication</h3>
        <p>Two paths: paste an API key into <code>config.json</code>, or use the auth commands for OAuth/token flows.</p>

        <pre><code><span class="hl-comment"># OpenAI OAuth (device code; default)</span>
<span class="hl-cmd">sciclaw</span> auth login <span class="hl-flag">--provider</span> openai

<span class="hl-comment"># Anthropic token paste</span>
<span class="hl-cmd">sciclaw</span> auth login <span class="hl-flag">--provider</span> anthropic

<span class="hl-comment"># Check status</span>
<span class="hl-cmd">sciclaw</span> auth status

<span class="hl-comment"># Remove stored credential</span>
<span class="hl-cmd">sciclaw</span> auth logout <span class="hl-flag">--provider</span> openai</code></pre>

        <p>Credentials are stored in <code>~/.picoclaw/auth.json</code> with user-only file permissions. A successful login sets <code>providers.&lt;name&gt;.auth_method</code> in the config (<code>oauth</code> or <code>token</code>).</p>
      </div>

      <!-- ─── Workspace ─── -->
      <div class="section" id="workspace">
        <h3>Workspace Layout</h3>
        <p>The workspace lives at the path configured in <code>agents.defaults.workspace</code> (default <code>~/sciclaw</code>).</p>

        <pre><code>~/sciclaw/
├── sessions/          <span class="hl-comment"># Conversation history</span>
├── memory/            <span class="hl-comment"># Long-term memory (MEMORY.md)</span>
├── state/             <span class="hl-comment"># Persistent state</span>
├── cron/              <span class="hl-comment"># Scheduled jobs database</span>
├── skills/            <span class="hl-comment"># Installed skills</span>
├── hooks/             <span class="hl-comment"># Hook audit log (hook-events.jsonl)</span>
├── irl/
│   └── commands/      <span class="hl-comment"># IRL command execution audit records</span>
├── AGENTS.md          <span class="hl-comment"># Agent behavior guide</span>
├── HEARTBEAT.md       <span class="hl-comment"># Periodic task prompts</span>
├── HOOKS.md           <span class="hl-comment"># Hook policy (plain-language)</span>
├── IDENTITY.md        <span class="hl-comment"># sciClaw identity</span>
├── SOUL.md            <span class="hl-comment"># Agent values &amp; guardrails</span>
├── TOOLS.md           <span class="hl-comment"># Tool descriptions</span>
└── USER.md            <span class="hl-comment"># User preferences</span></code></pre>

        <p>Bootstrap templates are versioned at <code>pkg/workspacetpl/templates/workspace/</code> and also installed to <code>~/.picoclaw/templates/workspace/</code> for review and customization.</p>
      </div>

      <hr />

      <!-- ━━━━━ CLI REFERENCE ━━━━━ -->
      <div class="section" id="cli-reference">
        <h2>CLI Reference</h2>

        <table>
          <thead>
            <tr><th>Command</th><th>Description</th></tr>
          </thead>
          <tbody>
            <tr><td><code>sciclaw onboard</code></td><td>Initialize config, workspace, and baseline skills</td></tr>
            <tr><td><code>sciclaw agent -m "..."</code></td><td>Send a one-shot message to the agent</td></tr>
            <tr><td><code>sciclaw agent</code></td><td>Start interactive chat mode</td></tr>
            <tr><td><code>sciclaw agent --model &lt;model&gt;</code></td><td>Override model for this invocation</td></tr>
            <tr><td><code>sciclaw agent --effort &lt;level&gt;</code></td><td>Set reasoning effort level</td></tr>
            <tr><td><code>sciclaw models list</code></td><td>Show current model and configured providers</td></tr>
            <tr><td><code>sciclaw models set &lt;model&gt;</code></td><td>Persistently change the default model</td></tr>
            <tr><td><code>sciclaw models effort &lt;level&gt;</code></td><td>Persistently change the reasoning effort</td></tr>
            <tr><td><code>sciclaw models status</code></td><td>Show model, provider, auth, and effort</td></tr>
            <tr><td><code>sciclaw gateway</code></td><td>Start the gateway for chat channels</td></tr>
            <tr><td><code>sciclaw service &lt;subcommand&gt;</code></td><td>Manage background gateway service (install/start/stop/restart/status/logs)</td></tr>
            <tr><td><code>sciclaw status</code></td><td>Show current status (includes IRL runtime check)</td></tr>
            <tr><td><code>sciclaw doctor</code></td><td>Verify deployment: config, tools, skills, auth, gateway, service</td></tr>
            <tr><td><code>sciclaw doctor --fix</code></td><td>Auto-fix: sync baseline skills, remove legacy names</td></tr>
            <tr><td><code>sciclaw auth login</code></td><td>Authenticate with a provider</td></tr>
            <tr><td><code>sciclaw auth status</code></td><td>Show stored credentials</td></tr>
            <tr><td><code>sciclaw auth logout</code></td><td>Remove a stored credential</td></tr>
            <tr><td><code>sciclaw skills list</code></td><td>List installed skills</td></tr>
            <tr><td><code>sciclaw skills install</code></td><td>Install a skill</td></tr>
            <tr><td><code>sciclaw cron list</code></td><td>List scheduled jobs</td></tr>
            <tr><td><code>sciclaw cron add</code></td><td>Add a scheduled job</td></tr>
            <tr><td><code>sciclaw migrate</code></td><td>Migrate from OpenClaw</td></tr>
          </tbody>
        </table>

        <div class="callout">
          <div class="callout-title">Compatibility</div>
          <p>The <code>picoclaw</code> command is available as an alias for upstream compatibility.</p>
        </div>
      </div>

      <!-- ─── Agent ─── -->
      <div class="section" id="agent">
        <h3>Agent</h3>
        <p>The <code>agent</code> command is the primary way to interact with sciClaw.</p>

        <pre><code><span class="hl-comment"># One-shot query</span>
<span class="hl-cmd">sciclaw</span> agent <span class="hl-flag">-m</span> <span class="hl-string">"Summarize recent ALS biomarker literature"</span>

<span class="hl-comment"># Interactive session</span>
<span class="hl-cmd">sciclaw</span> agent

<span class="hl-comment"># Override model for one invocation (config unchanged)</span>
<span class="hl-cmd">sciclaw</span> agent <span class="hl-flag">--model</span> gpt-5.2 <span class="hl-flag">-m</span> <span class="hl-string">"Quick question"</span>

<span class="hl-comment"># Set reasoning effort for GPT-5.2 (quality/latency/cost control)</span>
<span class="hl-cmd">sciclaw</span> agent <span class="hl-flag">--effort</span> high <span class="hl-flag">-m</span> <span class="hl-string">"Analyze this complex dataset"</span>

<span class="hl-comment"># Combine both overrides</span>
<span class="hl-cmd">sciclaw</span> agent <span class="hl-flag">--model</span> gpt-5.2 <span class="hl-flag">--effort</span> xhigh <span class="hl-flag">-m</span> <span class="hl-string">"Deep analysis"</span></code></pre>

        <p>In interactive mode the agent maintains session context, uses tools (filesystem, shell, web search, spawn), and follows the paired-scientist loop defined in <code>AGENTS.md</code>.</p>
      </div>

      <!-- ─── Model Switching ─── -->
      <div class="section" id="model-switching">
        <h3>Model Switching</h3>
        <p>Previously, switching models required editing <code>~/.picoclaw/config.json</code> by hand and restarting. sciClaw now supports three ways to change models &mdash; a one-shot CLI flag, a persistent subcommand, and the config file. In practice, use <code>gpt-5.2</code> as the primary path and tune reasoning effort per task.</p>

        <h4>1. Per-invocation override (<code>--model</code>)</h4>
        <p>The <code>--model</code> flag overrides the model for a single command. Your config file is <strong>not changed</strong>, so the next invocation returns to your default. Use this when testing a model, when your primary provider is down, or when a specific task needs a different model.</p>
        <pre><code><span class="hl-comment"># Quick task with GPT-5.2 (config unchanged)</span>
<span class="hl-cmd">sciclaw</span> agent <span class="hl-flag">--model</span> gpt-5.2 <span class="hl-flag">-m</span> <span class="hl-string">"Summarize this CSV"</span>

<span class="hl-comment"># Deep analysis with maximum GPT-5.2 effort</span>
<span class="hl-cmd">sciclaw</span> agent <span class="hl-flag">--model</span> gpt-5.2 <span class="hl-flag">--effort</span> xhigh <span class="hl-flag">-m</span> <span class="hl-string">"Review this manuscript draft"</span>

<span class="hl-comment"># Interactive session with a specific model</span>
<span class="hl-cmd">sciclaw</span> agent <span class="hl-flag">--model</span> gpt-5.2</code></pre>

        <h4>2. Persistent change (<code>sciclaw models</code>)</h4>
        <p>The <code>models</code> subcommand lets you inspect and change your default model without opening a text editor.</p>

        <pre><code><span class="hl-comment"># See current model, resolved provider, auth method, and effort</span>
<span class="hl-cmd">sciclaw</span> models status

<span class="hl-comment"># List all configured providers and their available models</span>
<span class="hl-cmd">sciclaw</span> models list

<span class="hl-comment"># Switch default model (writes to config.json)</span>
<span class="hl-cmd">sciclaw</span> models set gpt-5.2
<span class="hl-comment"># Output: Model changed: &lt;previous&gt; → gpt-5.2</span>
<span class="hl-comment">#         Provider: openai</span></code></pre>

        <h4>3. Config file</h4>
        <p>You can also set the model directly in <code>~/.picoclaw/config.json</code>. This is the same file that <code>sciclaw models set</code> writes to.</p>
        <pre><code>{
  <span class="hl-key">"agents"</span>: {
    <span class="hl-key">"defaults"</span>: {
      <span class="hl-key">"model"</span>: <span class="hl-string">"gpt-5.2"</span>,
      <span class="hl-key">"reasoning_effort"</span>: <span class="hl-string">"high"</span>
    }
  }
}</code></pre>
        <p>You can also use the environment variable <code>PICOCLAW_AGENTS_DEFAULTS_MODEL</code> to override the model, and <code>PICOCLAW_AGENTS_DEFAULTS_REASONING_EFFORT</code> for effort.</p>

        <h4>Provider auto-detection</h4>
        <p>sciClaw resolves the provider from the model name automatically. You generally do not need to set <code>agents.defaults.provider</code> explicitly.</p>
        <table>
          <thead>
            <tr><th>Model name contains</th><th>Resolved provider</th></tr>
          </thead>
          <tbody>
            <tr><td><code>claude</code>, <code>anthropic/</code></td><td>Anthropic</td></tr>
            <tr><td><code>gpt</code>, <code>o1</code>, <code>o3</code>, <code>o4</code>, <code>codex</code>, <code>openai/</code></td><td>OpenAI</td></tr>
            <tr><td><code>gemini</code>, <code>google/</code></td><td>Gemini</td></tr>
            <tr><td><code>deepseek</code></td><td>DeepSeek</td></tr>
            <tr><td><code>glm</code>, <code>zhipu</code></td><td>Zhipu</td></tr>
            <tr><td><code>groq/</code></td><td>Groq</td></tr>
            <tr><td><code>openrouter/</code>, <code>meta-llama/</code></td><td>OpenRouter</td></tr>
          </tbody>
        </table>
        <p>If the provider has an API key or OAuth credential configured, the model is routed to it automatically. If you use OpenRouter, any <code>openrouter/</code>-prefixed model works without additional setup.</p>

        <h4>Reasoning effort</h4>
        <p>Reasoning effort controls how deeply <code>gpt-5.2</code> thinks before answering. This is <strong>critical</strong> because effort directly controls quality, latency, and cost. Without setting it, the provider default is used.</p>

        <table>
          <thead>
            <tr><th>Provider</th><th>Valid levels</th><th>Default when unset</th></tr>
          </thead>
          <tbody>
            <tr><td>OpenAI (<code>gpt-5.2</code>)</td><td><code>none</code> &middot; <code>minimal</code> &middot; <code>low</code> &middot; <code>medium</code> &middot; <code>high</code> &middot; <code>xhigh</code></td><td>provider default (use <code>medium</code> as practical baseline)</td></tr>
          </tbody>
        </table>

        <p><strong>Per-invocation:</strong> use <code>--effort</code> to set effort for a single command.</p>
        <pre><code><span class="hl-comment"># High reasoning for a complex analysis</span>
<span class="hl-cmd">sciclaw</span> agent <span class="hl-flag">--effort</span> high <span class="hl-flag">-m</span> <span class="hl-string">"Analyze the statistical methods in this paper"</span>

<span class="hl-comment"># Maximum reasoning for hardest tasks</span>
<span class="hl-cmd">sciclaw</span> agent <span class="hl-flag">--model</span> gpt-5.2 <span class="hl-flag">--effort</span> xhigh <span class="hl-flag">-m</span> <span class="hl-string">"Prove this theorem"</span>

<span class="hl-comment"># Minimal reasoning for fast, cheap responses</span>
<span class="hl-cmd">sciclaw</span> agent <span class="hl-flag">--effort</span> low <span class="hl-flag">-m</span> <span class="hl-string">"What day is it?"</span></code></pre>

        <p><strong>Persistent:</strong> save a default effort level so you don't have to pass <code>--effort</code> every time.</p>
        <pre><code><span class="hl-comment"># Save effort to config.json</span>
<span class="hl-cmd">sciclaw</span> models effort high

<span class="hl-comment"># Check current setting</span>
<span class="hl-cmd">sciclaw</span> models status
<span class="hl-comment"># Output: Model:            gpt-5.2</span>
<span class="hl-comment">#         Provider:         openai</span>
<span class="hl-comment">#         Auth:             oauth</span>
<span class="hl-comment">#         Reasoning Effort: high</span></code></pre>

        <div class="callout">
          <div class="callout-title">How effort maps to provider APIs</div>
          <p><strong>OpenAI:</strong> Sets the <code>reasoning.effort</code> field in the Responses API for <code>gpt-5.2</code>.</p>
        </div>

        <div class="callout callout-warn">
          <div class="callout-title">Choosing an effort level</div>
          <p><code>low</code> / <code>minimal</code> &mdash; Fast, cheap. Good for simple lookups and formatting tasks.</p>
          <p><code>medium</code> / <code>high</code> &mdash; Balanced. Good for most research and analysis work.</p>
          <p><code>xhigh</code> &mdash; Maximum reasoning depth. Use for proofs, complex debugging, or multi-step scientific reasoning. Significantly slower and more expensive.</p>
        </div>

        <h4>Precedence</h4>
        <p>When multiple sources set the model or effort, the most specific wins:</p>
        <ol>
          <li><code>--model</code> / <code>--effort</code> CLI flags (highest priority, single invocation)</li>
          <li>Environment variables (<code>PICOCLAW_AGENTS_DEFAULTS_MODEL</code>, <code>PICOCLAW_AGENTS_DEFAULTS_REASONING_EFFORT</code>)</li>
          <li><code>config.json</code> values (lowest priority, persistent default)</li>
        </ol>
      </div>

      <!-- ─── Gateway ─── -->
      <div class="section" id="gateway">
        <h3>Gateway</h3>
        <p>The gateway bridges sciClaw to chat channels (Telegram, Discord, Slack, etc.).</p>

        <pre><code><span class="hl-cmd">sciclaw</span> gateway</code></pre>
        <p>It reads channel configuration from <code>config.json</code>, starts listeners for each enabled channel, and routes messages through the agent loop. The heartbeat service also starts with the gateway.</p>
      </div>

      <div class="section" id="service">
        <h3>Service</h3>
        <p>Use <code>service</code> to run the gateway in the background and control lifecycle from one command.</p>

        <pre><code><span class="hl-comment"># Install + start background gateway</span>
<span class="hl-cmd">sciclaw</span> service install
<span class="hl-cmd">sciclaw</span> service start

<span class="hl-comment"># Lifecycle</span>
<span class="hl-cmd">sciclaw</span> service status
<span class="hl-cmd">sciclaw</span> service restart
<span class="hl-cmd">sciclaw</span> service stop
<span class="hl-cmd">sciclaw</span> service logs <span class="hl-flag">--lines</span> 200
<span class="hl-cmd">sciclaw</span> service uninstall</code></pre>

        <h4>Backend by platform</h4>
        <ul>
          <li><strong>macOS:</strong> per-user <code>launchd</code> at <code>~/Library/LaunchAgents/io.sciclaw.gateway.plist</code></li>
          <li><strong>Linux:</strong> <code>systemd --user</code> unit at <code>~/.config/systemd/user/sciclaw-gateway.service</code></li>
          <li><strong>WSL:</strong> supported when systemd is enabled in the distro; otherwise run <code>sciclaw gateway</code> in a terminal</li>
        </ul>
      </div>

      <!-- ─── Skills command ─── -->
      <div class="section" id="skills-cmd">
        <h3>Skills</h3>
        <pre><code><span class="hl-comment"># List installed skills</span>
<span class="hl-cmd">sciclaw</span> skills list

<span class="hl-comment"># Install a skill from a directory or URL</span>
<span class="hl-cmd">sciclaw</span> skills install <span class="hl-string">./my-skill</span></code></pre>
        <p>Skills extend the agent with specialized knowledge and workflows. Each skill is a directory containing a <code>SKILL.md</code> with name, description, and instructions.</p>
      </div>

      <!-- ─── Doctor ─── -->
      <div class="section" id="doctor">
        <h3>Doctor</h3>
        <p>The <code>doctor</code> command verifies your entire sciClaw deployment in one shot &mdash; config, workspace, auth credentials, companion CLI tools, baseline skills, gateway health, service health, and Homebrew update status.</p>

        <pre><code><span class="hl-comment"># Human-readable report</span>
<span class="hl-cmd">sciclaw</span> doctor

<span class="hl-comment"># Machine-readable output</span>
<span class="hl-cmd">sciclaw</span> doctor <span class="hl-flag">--json</span>

<span class="hl-comment"># Auto-fix: sync baseline skills, remove legacy skill names</span>
<span class="hl-cmd">sciclaw</span> doctor <span class="hl-flag">--fix</span></code></pre>

        <h4>What it checks</h4>
        <table>
          <thead>
            <tr><th>Check</th><th>What it verifies</th></tr>
          </thead>
          <tbody>
            <tr><td><code>config</code></td><td><code>~/.picoclaw/config.json</code> exists and loads</td></tr>
            <tr><td><code>workspace</code></td><td>Workspace directory exists</td></tr>
            <tr><td><code>auth.openai</code></td><td>OAuth status: authenticated, expired, or needs refresh</td></tr>
            <tr><td><code>docx-review</code></td><td>Word document CLI tool installed</td></tr>
            <tr><td><code>pubmed-cli</code></td><td>PubMed CLI tool installed (checks both <code>pubmed</code> and <code>pubmed-cli</code> names)</td></tr>
            <tr><td><code>irl</code></td><td>IRL runtime available</td></tr>
            <tr><td><code>pandoc</code></td><td>Document converter installed</td></tr>
            <tr><td><code>rg</code></td><td>ripgrep installed (used by agent tools)</td></tr>
            <tr><td><code>python3</code></td><td>Python 3 available</td></tr>
            <tr><td><code>skills.baseline</code></td><td>All 12 baseline skills present; detects legacy names (<code>docx</code>, <code>pubmed-database</code>)</td></tr>
            <tr><td><code>gateway.telegram</code></td><td>Scans logs for Telegram 409 conflicts (multiple bot instances)</td></tr>
            <tr><td><code>service.backend</code></td><td>Detects service backend (<code>launchd</code>, <code>systemd-user</code>, or unsupported)</td></tr>
            <tr><td><code>service.installed</code></td><td>Checks whether the background service unit/plist is installed</td></tr>
            <tr><td><code>service.running</code></td><td>Checks whether the background service is active</td></tr>
            <tr><td><code>service.enabled</code></td><td>Checks whether the service is enabled on login</td></tr>
            <tr><td><code>homebrew.sciclaw</code></td><td>Checks if sciClaw is outdated in Homebrew</td></tr>
          </tbody>
        </table>

        <h4>The <code>--fix</code> flag</h4>
        <p>When <code>--fix</code> is passed, doctor applies safe, non-destructive fixes:</p>
        <ul>
          <li>Syncs baseline skills from the bundled Homebrew share directory to your workspace</li>
          <li>Removes legacy skill directories (<code>docx</code>, <code>pubmed-database</code>) that were replaced by <code>docx-review</code> and <code>pubmed-cli</code></li>
          <li>Creates a <code>pubmed-cli</code> symlink if only <code>pubmed</code> is found on PATH</li>
        </ul>

        <p>Exit code 0 = all checks pass. Exit code 1 = at least one error.</p>

        <div class="callout">
          <div class="callout-title">Tip</div>
          <p>Run <code>sciclaw doctor --json</code> to pipe the report into other tools. Each check includes a <code>status</code> field (<code>ok</code>, <code>warn</code>, <code>error</code>, <code>skip</code>) and optional <code>data</code> with install hints.</p>
        </div>
      </div>

      <hr />

      <!-- ━━━━━ SCIENTIFIC WORKFLOW ━━━━━ -->
      <div class="section" id="paired-scientist">
        <h2>Paired-Scientist Model</h2>
        <p class="page-subtitle">sciClaw acts as a research collaborator, not a general-purpose assistant.</p>

        <p>Every interaction follows principles of <strong>epistemic humility</strong>, <strong>reproducibility</strong>, and <strong>evidence-based reasoning</strong>. The agent separates hypotheses from verified findings, cites commands and files for every claim, and escalates when evidence is missing or conflicting.</p>

        <table>
          <thead>
            <tr><th>Area</th><th>What sciClaw provides</th></tr>
          </thead>
          <tbody>
            <tr><td>Framing</td><td>Paired-scientist for hypothesis-driven research loops</td></tr>
            <tr><td>Workspace</td><td>Scientific templates (AGENTS, IDENTITY, SOUL, TOOLS, USER)</td></tr>
            <tr><td>Traceability</td><td>Required: evidence capture, provenance logging, hook audit trails</td></tr>
            <tr><td>Skills</td><td>12 baseline scientific skills + companion CLI tools</td></tr>
            <tr><td>Providers</td><td>OpenAI, Anthropic, Gemini, OpenRouter, DeepSeek, Groq, Zhipu</td></tr>
            <tr><td>Reasoning</td><td>Per-invocation <code>--effort</code> control for reasoning models</td></tr>
          </tbody>
        </table>
      </div>

      <!-- ─── Research Loop ─── -->
      <div class="section" id="research-loop">
        <h3>Research Loop</h3>
        <p>Each iteration follows a four-phase protocol defined in <code>AGENTS.md</code>:</p>

        <ol>
          <li><strong>Frame</strong> &mdash; State the question, objective, and hypothesis explicitly.</li>
          <li><strong>Plan</strong> &mdash; Propose a reproducible execution plan with specific commands and expected outputs.</li>
          <li><strong>Execute</strong> &mdash; Run tools, capture evidence and logs. Prefer idempotent and reversible operations.</li>
          <li><strong>Record</strong> &mdash; Update manuscript sections, plan logs, and rendered outputs. Commit together.</li>
        </ol>

        <div class="callout">
          <div class="callout-title">Guardrails</div>
          <p>Hypotheses are labeled as such until evidence confirms them. Every claim cites the command, file, or tool output that produced it. When evidence is missing or conflicting, the agent escalates rather than guessing.</p>
        </div>
      </div>

      <!-- ─── Skills ─── -->
      <div class="section" id="skills">
        <h3>Baseline Scientific Skills</h3>
        <p>During <code>sciclaw onboard</code>, twelve skills are installed into <code>~/sciclaw/skills/</code> by default:</p>

        <h4>Research &amp; Literature</h4>
        <ul>
          <li><strong>scientific-writing</strong> &mdash; Manuscript drafting with claim-evidence alignment</li>
          <li><strong>pubmed-cli</strong> &mdash; PubMed search, article fetch, citation graphs, MeSH lookup (<a href="https://github.com/drpedapati/pubmed-cli">CLI tool</a>)</li>
          <li><strong>biorxiv-database</strong> &mdash; bioRxiv/medRxiv preprint surveillance</li>
        </ul>

        <h4>Authoring &amp; Visualization</h4>
        <ul>
          <li><strong>quarto-authoring</strong> &mdash; Loop-driven <code>.qmd</code> authoring and rendering</li>
          <li><strong>beautiful-mermaid</strong> &mdash; Publication-grade diagram workflows</li>
        </ul>

        <h4>Evidence &amp; Provenance</h4>
        <ul>
          <li><strong>experiment-provenance</strong> &mdash; Reproducible experiment evidence capture</li>
          <li><strong>benchmark-logging</strong> &mdash; Benchmark records with acceptance criteria</li>
        </ul>

        <h4>Office &amp; Documents</h4>
        <ul>
          <li><strong>docx-review</strong> &mdash; Word documents with tracked changes, comments, and semantic diff (<a href="https://github.com/drpedapati/docx-review">CLI tool</a>)</li>
          <li><strong>pptx</strong> &mdash; PowerPoint creation and editing</li>
          <li><strong>pdf</strong> &mdash; PDF creation, merging, splitting, and extraction</li>
          <li><strong>xlsx</strong> &mdash; Spreadsheet creation, analysis, and conversion</li>
        </ul>

        <h4>Polish</h4>
        <ul>
          <li><strong>humanize-text</strong> &mdash; Final-pass language polishing for natural tone</li>
        </ul>

        <h4>Optional Bundled Skill (Manual Install)</h4>
        <ul>
          <li><strong>phi-cleaner</strong> &mdash; Clinical text de-identification helper for PHI-safe sharing workflows (<code>phi-clean</code> CLI)</li>
        </ul>
        <p>This skill is bundled with sciClaw and available to the agent. Install the companion CLI only if needed:</p>
        <pre><code><span class="hl-cmd">brew</span> tap drpedapati/tools
<span class="hl-cmd">brew</span> install drpedapati/tools/phi-cleaner</code></pre>

        <h4>Office Tool Repo Migration</h4>
        <p>Office companion tools were transferred from <code>henrybloomingdale/*</code> to <code>drpedapati/*</code>. If you install those tools directly, use the new tap:</p>
        <pre><code><span class="hl-cmd">brew</span> tap drpedapati/tools
<span class="hl-cmd">brew</span> install drpedapati/tools/docx-review
<span class="hl-cmd">brew</span> install drpedapati/tools/pptx-review
<span class="hl-cmd">brew</span> install drpedapati/tools/xlsx-review</code></pre>

        <h4>Companion CLI Tools</h4>
        <p>Two skills are powered by standalone CLI tools that provide native file format support. Install them alongside sciClaw for full functionality:</p>
        <pre><code><span class="hl-cmd">brew</span> install drpedapati/tools/docx-review   <span class="hl-comment"># Word docs with tracked changes (Open XML SDK)</span>
<span class="hl-cmd">brew</span> install drpedapati/tools/pubmed-cli     <span class="hl-comment"># PubMed search &amp; citation graphs</span></code></pre>

        <h4>Skills Catalog</h4>
        <p>Additional skills are available from the <a href="https://github.com/drpedapati/sciclaw-skills">skills catalog</a>:</p>
        <pre><code><span class="hl-cmd">sciclaw</span> skills install <span class="hl-string">drpedapati/sciclaw-skills/&lt;skill-name&gt;</span></code></pre>
        <p>The skills installer validates all content before writing to disk: size limits (256KB per skill), binary content rejection, YAML frontmatter validation, and SHA-256 provenance logging.</p>
      </div>

      <hr />

      <!-- ━━━━━ IRL INTEGRATION ━━━━━ -->
      <div class="section" id="irl">
        <h2>IRL Integration</h2>
        <p class="page-subtitle">The Idempotent Research Loop manages the project lifecycle layer that sits above sciClaw's per-loop reproducibility.</p>

        <p>sciClaw enforces rigor <em>inside</em> each research loop &mdash; evidence capture, manuscript updates, plan logs. But what about the layer above? Creating new projects, organizing them consistently, rediscovering past work, and switching context between studies. That's where IRL comes in.</p>
      </div>

      <!-- ─── Why IRL ─── -->
      <div class="section" id="irl-why">
        <h3>Why IRL</h3>

        <p>Without project lifecycle management, common problems accumulate:</p>

        <ul>
          <li><strong>Project sprawl</strong> &mdash; Research directories pile up with inconsistent names and scattered locations. Finding last month's ERP analysis means grepping through your home directory.</li>
          <li><strong>Boilerplate friction</strong> &mdash; Every new study starts with the same manual work: creating directories, plan files, config, and manuscript scaffolding before the real work begins.</li>
          <li><strong>Lost context</strong> &mdash; The agent has no structured way to discover what projects exist or switch between them. You end up pasting paths manually.</li>
          <li><strong>No adoption path</strong> &mdash; Existing messy folders can't be retroactively brought under management without starting over.</li>
        </ul>

        <p>IRL solves these by providing a thin, idempotent project lifecycle layer:</p>

        <ul>
          <li><strong>Auto-named, datestamped projects</strong> &mdash; <code>irl init "ERP correlation analysis"</code> creates a consistent <code>260214-erp-correlation-analysis/</code> directory with plans, data, and manuscript scaffolding built in.</li>
          <li><strong>Discoverability</strong> &mdash; <code>irl list --json</code> gives the agent a structured view of all managed projects for context-switching without remembering paths.</li>
          <li><strong>Adopt existing work</strong> &mdash; <code>irl adopt ./messy-folder</code> brings existing directories under management without starting over.</li>
          <li><strong>Templates</strong> &mdash; Different study types get different scaffolding from day one.</li>
          <li><strong>Safe by default</strong> &mdash; Operations are idempotent and non-destructive. No accidental overwrites, explicit flags for renames.</li>
        </ul>
      </div>

      <!-- ─── How It Works ─── -->
      <div class="section" id="irl-how">
        <h3>How It Works in sciClaw</h3>

        <p>IRL is bundled as a <strong>Homebrew dependency</strong> &mdash; when you install sciClaw, <code>irl</code> is installed alongside it automatically. There is no <code>sciclaw irl</code> subcommand. Instead, the agent mediates all IRL interactions internally, shelling out to the <code>irl</code> binary and consuming its machine-readable outputs.</p>

        <p>Four operations are available through the agent:</p>

        <table>
          <thead>
            <tr><th>Operation</th><th>What the agent does</th><th>IRL command</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Create project</strong></td><td>Scaffolds a new research project with auto-naming</td><td><code>irl init "purpose" [-t template]</code></td></tr>
            <tr><td><strong>Adopt project</strong></td><td>Brings an existing directory under IRL management</td><td><code>irl adopt &lt;path&gt; [--rename]</code></td></tr>
            <tr><td><strong>Discover projects</strong></td><td>Lists all managed projects for context-switching</td><td><code>irl list --json</code></td></tr>
            <tr><td><strong>Workspace context</strong></td><td>Reads current IRL config and profile</td><td><code>irl config --json</code> + <code>irl profile --json</code></td></tr>
          </tbody>
        </table>

        <p>You interact with these through natural conversation with the agent. For example:</p>

        <pre><code><span class="hl-cmd">sciclaw</span> agent <span class="hl-flag">-m</span> <span class="hl-string">"Create a new project for ERP correlation analysis"</span>

<span class="hl-cmd">sciclaw</span> agent <span class="hl-flag">-m</span> <span class="hl-string">"What projects do I have?"</span>

<span class="hl-cmd">sciclaw</span> agent <span class="hl-flag">-m</span> <span class="hl-string">"Adopt my old als-biomarker folder as a managed project"</span></code></pre>

        <p>To verify IRL is available:</p>
        <pre><code><span class="hl-cmd">sciclaw</span> status
<span class="hl-comment"># Output includes: IRL Runtime: ✓ /opt/homebrew/bin/irl</span></code></pre>

        <div class="callout">
          <div class="callout-title">No subcommand by design</div>
          <p>IRL operations are agent-mediated, not exposed as <code>sciclaw irl ...</code> commands. This keeps the CLI surface minimal and lets the agent handle argument construction, error recovery, and provenance logging automatically.</p>
        </div>
      </div>

      <!-- ─── IRL Provenance ─── -->
      <div class="section" id="irl-provenance">
        <h3>Provenance</h3>
        <p>Every IRL command the agent executes is recorded as a timestamped JSON entry in <code>~/sciclaw/irl/commands/</code> by default. Each record captures:</p>

        <ul>
          <li>Full command argv and working directory</li>
          <li>Timestamp and IRL version</li>
          <li>stdout, stderr, and exit code</li>
          <li>Parsed payload (for JSON-returning commands)</li>
          <li>Normalized status (<code>success</code>, <code>failure</code>, <code>partial</code>)</li>
          <li>Correlation IDs linking to unified runtime logs</li>
        </ul>

        <pre><code><span class="hl-comment"># View recent IRL command records</span>
<span class="hl-cmd">ls</span> ~/sciclaw/irl/commands/</code></pre>

        <p>The command store is append-only audit material &mdash; no in-place mutation. This gives you a complete trail of every project created, adopted, or discovered through the agent.</p>
      </div>

      <hr />

      <!-- ━━━━━ CHANNELS ━━━━━ -->
      <div class="section" id="channels">
        <h2>Chat Channels</h2>
        <p class="page-subtitle">Talk to sciClaw through your preferred messaging app.</p>

        <table>
          <thead>
            <tr><th>Channel</th><th>Setup Difficulty</th><th>Notes</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>Telegram</strong></td><td>Easy</td><td>Recommended. Just a bot token.</td></tr>
            <tr><td><strong>Discord</strong></td><td>Easy</td><td>Bot token + message content intent</td></tr>
            <tr><td><strong>Slack</strong></td><td>Medium</td><td>App + bot token</td></tr>
            <tr><td><strong>QQ</strong></td><td>Easy</td><td>AppID + AppSecret</td></tr>
            <tr><td><strong>DingTalk</strong></td><td>Medium</td><td>Client ID + secret</td></tr>
            <tr><td><strong>WhatsApp</strong></td><td>Advanced</td><td>Requires bridge</td></tr>
          </tbody>
        </table>
      </div>

      <!-- ─── Telegram ─── -->
      <div class="section" id="telegram">
        <h3>Telegram</h3>

        <p><strong>1. Create a bot</strong> &mdash; Open Telegram, search <code>@BotFather</code>, send <code>/newbot</code>, and copy the token.</p>
        <p><strong>2. Run the setup wizard</strong></p>

        <pre><code><span class="hl-cmd">sciclaw</span> channels setup telegram</code></pre>

        <p>The wizard prompts for your bot token, then pairs your account by asking you to message the bot once. It will add your user to <code>allow_from</code> automatically (recommended).</p>

        <p><strong>Manual config (advanced)</strong></p>

        <pre><code>{
  <span class="hl-key">"channels"</span>: {
    <span class="hl-key">"telegram"</span>: {
      <span class="hl-key">"enabled"</span>: true,
      <span class="hl-key">"token"</span>: <span class="hl-string">"YOUR_BOT_TOKEN"</span>,
      <span class="hl-key">"allow_from"</span>: [<span class="hl-string">"YOUR_USER_ID"</span>]
    }
  }
}</code></pre>

        <p><strong>3. Run</strong></p>
        <pre><code><span class="hl-comment"># Always-on background mode (recommended)</span>
<span class="hl-cmd">sciclaw</span> service install
<span class="hl-cmd">sciclaw</span> service start

<span class="hl-comment"># Or foreground mode</span>
<span class="hl-cmd">sciclaw</span> gateway</code></pre>
      </div>

      <!-- ─── Discord ─── -->
      <div class="section" id="discord">
        <h3>Discord</h3>

        <ol>
          <li>Go to <a href="https://discord.com/developers/applications">discord.com/developers</a> and create an application.</li>
          <li>In Bot settings, enable <strong>MESSAGE CONTENT INTENT</strong>.</li>
          <li>Copy the bot token.</li>
          <li>Get your User ID (Developer Mode &rarr; right-click avatar &rarr; Copy User ID).</li>
          <li>Run the setup wizard:</li>
        </ol>

        <pre><code><span class="hl-cmd">sciclaw</span> channels setup discord</code></pre>

        <p><strong>Run</strong></p>
        <pre><code><span class="hl-comment"># Always-on background mode (recommended)</span>
<span class="hl-cmd">sciclaw</span> service install
<span class="hl-cmd">sciclaw</span> service start

<span class="hl-comment"># Or foreground mode</span>
<span class="hl-cmd">sciclaw</span> gateway</code></pre>

        <ol start="6">
          <li>Generate an invite URL via OAuth2 (scopes: <code>bot</code>; permissions: Send Messages, Read Message History).</li>
          <li>Use <code>sciclaw service status</code> to confirm the gateway is running in background mode.</li>
        </ol>
      </div>

      <hr />

      <!-- ━━━━━ HOOKS ━━━━━ -->
      <div class="section" id="hooks">
        <h2>Hooks</h2>
        <p class="page-subtitle">Lifecycle hooks let you capture context, enforce policy, and build an audit trail at every stage of the agent loop.</p>

        <p>sciClaw fires hooks at seven points in the agent lifecycle. Each hook receives an immutable snapshot of the current turn &mdash; session, channel, tool call, LLM response &mdash; and returns a result that is written to the audit log.</p>

        <p>Two built-in handlers ship by default:</p>
        <ul>
          <li><strong>policy</strong> &mdash; Reads <code>HOOKS.md</code> and <code>hooks.yaml</code> from your workspace, enables/disables events, and injects per-event instructions.</li>
          <li><strong>provenance</strong> &mdash; Records normalized event metadata (turn ID, session, tool name) for reproducibility.</li>
        </ul>
      </div>

      <!-- ─── Hook Events ─── -->
      <div class="section" id="hook-events">
        <h3>Events</h3>

        <table>
          <thead>
            <tr><th>Event</th><th>Fires when</th></tr>
          </thead>
          <tbody>
            <tr><td><code>before_turn</code></td><td>A new user message arrives, before the agent loop begins</td></tr>
            <tr><td><code>after_turn</code></td><td>The agent loop finishes a turn</td></tr>
            <tr><td><code>before_llm</code></td><td>Just before calling the LLM provider</td></tr>
            <tr><td><code>after_llm</code></td><td>Immediately after the LLM responds</td></tr>
            <tr><td><code>before_tool</code></td><td>Before executing a tool call (shell, file, web, etc.)</td></tr>
            <tr><td><code>after_tool</code></td><td>After a tool call completes</td></tr>
            <tr><td><code>on_error</code></td><td>When an error occurs anywhere in the loop</td></tr>
          </tbody>
        </table>

        <p>Each handler receives a <code>Context</code> snapshot containing the turn ID, session key, channel, model, user message, tool name/args/result, LLM response summary, and error message as applicable.</p>
      </div>

      <!-- ─── Hook Policy ─── -->
      <div class="section" id="hook-policy">
        <h3>Policy</h3>
        <p>Hook behavior is configured through workspace files. The policy loader checks two sources in order:</p>

        <ol>
          <li><strong><code>HOOKS.md</code></strong> &mdash; Plain-language instructions per event, written so non-technical users can maintain them.</li>
          <li><strong><code>hooks.yaml</code></strong> &mdash; Structured policy with per-event enable/disable, verbosity levels, capture fields, and redaction keys.</li>
        </ol>

        <p>Example <code>HOOKS.md</code> (installed during <code>sciclaw onboard</code>):</p>

        <pre><code><span class="hl-comment">## before_turn</span>
- Capture project context needed for reproducibility.

<span class="hl-comment">## after_turn</span>
- Summarize completed actions and unresolved risks.
- Record what should be updated in manuscript and logs.

<span class="hl-comment">## before_tool</span>
- Record the intent of the tool call and key parameters (redacting secrets).

<span class="hl-comment">## after_tool</span>
- Record tool outcomes and where artifacts were written.

<span class="hl-comment">## on_error</span>
- Capture failure context, likely cause, and the next recovery step.</code></pre>

        <p>The default policy automatically redacts sensitive fields: <code>api_key</code>, <code>token</code>, <code>secret</code>, <code>authorization</code>, and <code>password</code>.</p>

        <div class="callout">
          <div class="callout-title">Tip</div>
          <p>Edit <code>HOOKS.md</code> in your workspace to customize what the agent captures at each lifecycle event. Changes take effect on the next turn &mdash; no restart required.</p>
        </div>
      </div>

      <!-- ─── Hook Audit ─── -->
      <div class="section" id="hook-audit">
        <h3>Audit Log</h3>
        <p>Every hook execution is appended to a JSONL audit log at <code>hooks/hook-events.jsonl</code> inside your workspace. Each entry records:</p>

        <ul>
          <li>Turn ID, event name, and handler name</li>
          <li>Status (<code>ok</code> or <code>error</code>) and duration in milliseconds</li>
          <li>Session key, channel, and chat ID</li>
          <li>Handler-specific metadata and any error messages</li>
        </ul>

        <pre><code><span class="hl-comment"># View recent hook events</span>
<span class="hl-cmd">tail</span> <span class="hl-flag">-5</span> ~/sciclaw/hooks/hook-events.jsonl | <span class="hl-cmd">jq</span> .</code></pre>

        <p>The audit log is designed for reproducibility &mdash; every claim the agent makes can be traced back to the tool calls and LLM responses that produced it.</p>
      </div>

      <hr />

      <!-- ━━━━━ HEARTBEAT ━━━━━ -->
      <div class="section" id="heartbeat">
        <h2>Heartbeat</h2>
        <p class="page-subtitle">Automatic periodic tasks, checked every 30 minutes (disabled by default).</p>

        <p>Create a <code>HEARTBEAT.md</code> file in your workspace with tasks the agent should execute periodically:</p>

        <pre><code><span class="hl-comment"># Periodic Tasks</span>

<span class="hl-comment">## Quick Tasks (respond directly)</span>
- Report current time

<span class="hl-comment">## Long Tasks (use spawn for async)</span>
- Search the web for AI news and summarize
- Check email and report important messages</code></pre>

        <p>For long-running work, the agent uses the <strong>spawn</strong> tool to create async subagents that run independently and communicate results via the message tool.</p>

        <pre><code>{
  <span class="hl-key">"heartbeat"</span>: {
    <span class="hl-key">"enabled"</span>: false,
    <span class="hl-key">"interval"</span>: 30
  }
}</code></pre>

        <p>Override via environment variables: <code>PICOCLAW_HEARTBEAT_ENABLED=false</code> or <code>PICOCLAW_HEARTBEAT_INTERVAL=60</code>.</p>
      </div>

      <!-- ─── Cron ─── -->
      <div class="section" id="cron">
        <h3>Scheduled Tasks</h3>
        <p>sciClaw supports cron-style scheduled tasks for reminders and recurring jobs.</p>

        <ul>
          <li><strong>One-time reminders</strong> &mdash; "Remind me in 10 minutes"</li>
          <li><strong>Recurring tasks</strong> &mdash; "Remind me every 2 hours"</li>
          <li><strong>Cron expressions</strong> &mdash; "Remind me at 9am daily"</li>
        </ul>

        <pre><code><span class="hl-cmd">sciclaw</span> cron list
<span class="hl-cmd">sciclaw</span> cron add <span class="hl-string">"Check email"</span> <span class="hl-flag">--every</span> 2h</code></pre>

        <p>Jobs are stored in <code>~/sciclaw/cron/</code> by default and processed automatically by the gateway.</p>
      </div>

      <!-- ─── Docker ─── -->
      <div class="section" id="docker">
        <h3>Docker</h3>
        <p>Run sciClaw in Docker without installing anything locally.</p>

        <pre><code><span class="hl-comment"># Clone and configure</span>
<span class="hl-cmd">git</span> clone https://github.com/drpedapati/sciclaw.git
<span class="hl-cmd">cd</span> sciclaw
<span class="hl-cmd">cp</span> config/config.example.json config/config.json

<span class="hl-comment"># Start gateway mode</span>
<span class="hl-cmd">docker</span> compose <span class="hl-flag">--profile</span> gateway up <span class="hl-flag">-d</span>

<span class="hl-comment"># Or run agent one-shot</span>
<span class="hl-cmd">docker</span> compose run <span class="hl-flag">--rm</span> sciclaw-agent <span class="hl-flag">-m</span> <span class="hl-string">"Hello"</span>

<span class="hl-comment"># Check logs</span>
<span class="hl-cmd">docker</span> compose logs <span class="hl-flag">-f</span> sciclaw-gateway

<span class="hl-comment"># Stop</span>
<span class="hl-cmd">docker</span> compose <span class="hl-flag">--profile</span> gateway down</code></pre>

        <p>The Docker image uses a multi-stage build (Go builder &rarr; Alpine) and ships with all baseline skills pre-installed.</p>
      </div>

      <!-- ━━━━━ PREV / NEXT ━━━━━ -->
      <div class="page-nav">
        <a href="index.html">
          <span class="page-nav-label">&larr; Previous</span>
          <span class="page-nav-title">Explainer</span>
        </a>
        <a href="https://github.com/drpedapati/sciclaw" class="page-nav-next">
          <span class="page-nav-label">Next &rarr;</span>
          <span class="page-nav-title">Source Code</span>
        </a>
      </div>
    </div>
  </main>
</div>

<!-- ═══════════ FOOTER ═══════════ -->
<footer class="footer">
  sciClaw &mdash; an autonomous paired-scientist CLI for reproducible research workflows. MIT License.
</footer>

<!-- ═══════════ JS ═══════════ -->
<script>
// Theme toggle
function toggleTheme() {
  var html = document.documentElement;
  var isDark = html.getAttribute('data-theme') === 'dark';
  if (isDark) {
    html.removeAttribute('data-theme');
    localStorage.setItem('sciclaw-theme', 'light');
  } else {
    html.setAttribute('data-theme', 'dark');
    localStorage.setItem('sciclaw-theme', 'dark');
  }
  updateThemeIcon();
}

function updateThemeIcon() {
  var btn = document.getElementById('themeToggle');
  if (!btn) return;
  var isDark = document.documentElement.getAttribute('data-theme') === 'dark';
  btn.innerHTML = isDark ? '&#9788;' : '&#9790;';
  btn.title = isDark ? 'Switch to light mode' : 'Switch to dark mode';
}

// Set icon on load and remove no-transition class
updateThemeIcon();
requestAnimationFrame(function() {
  document.documentElement.classList.remove('no-transition');
});

function toggleSidebar() {
  document.getElementById('sidebar').classList.toggle('open');
  document.getElementById('sidebarBackdrop').classList.toggle('open');
}

// Close sidebar on link click (mobile)
document.querySelectorAll('.sidebar-link').forEach(function(link) {
  link.addEventListener('click', function() {
    document.getElementById('sidebar').classList.remove('open');
    document.getElementById('sidebarBackdrop').classList.remove('open');
  });
});

// Active sidebar link tracking on scroll
(function() {
  var links = document.querySelectorAll('.sidebar-link');
  var sections = [];

  links.forEach(function(link) {
    var id = link.getAttribute('href');
    if (id && id.startsWith('#')) {
      var el = document.querySelector(id);
      if (el) sections.push({ el: el, link: link });
    }
  });

  function updateActive() {
    var scrollY = window.scrollY + 100;
    var current = sections[0];
    for (var i = 0; i < sections.length; i++) {
      if (sections[i].el.offsetTop <= scrollY) {
        current = sections[i];
      }
    }
    links.forEach(function(l) { l.classList.remove('active'); });
    if (current) current.link.classList.add('active');
  }

  window.addEventListener('scroll', updateActive, { passive: true });
  updateActive();
})();
</script>

</body>
</html>
